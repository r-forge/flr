library(kobe)
prompt("theme_ms")
getwd()
apropos("prompt")
data(sims)
ls()
head(sims)
ggplot(sims)+geom(aes(year,stock))
ggplot(sims)+geom_line(aes(year,stock))
ggplot(subset(sims,Run=="run02"))+geom_line(aes(year,stock))
head(prj)
head(prj1)
data(prj1)
data(prj)
head(prj)
names(prj)
ggplot(subset(prj$trks,Run=="run02"))+geom_line(aes(year,stock))
ggplot(subset(prj$trks))+geom_line(aes(year,stock))
head(prj$trks)
ggplot(subset(prj$trks))+geom_line(aes(year,stock))
ggplot(subset(prj$trks & Percentile=="50%"))+geom_line(aes(year,stock))
ggplot(subset(prj$trks, Percentile=="50%"))+geom_line(aes(year,stock))
ggplot(subset(prj$trks, Percentile=="50%"))+geom_line(aes(year,stock,col=TAC))
ggplot(subset(prj$trks, Percentile=="50%"))+geom_line(aes(year,stock,group=TAC,col=TAC))
ggplot(subset(prj$trks, Percentile=="50%"))             +
geom_line(aes(year,stock,group=TAC,col=TAC)) +
theme_ms()
theme_ms
data.frame(stock=1,harvest=2)
object=data.frame(stock=1,harvest=2)
source('~/Desktop/kobe/R/kobe-data.frame.R', echo=TRUE)
setGeneric('stock',   function(object, ...) standardGeneric('stock'))
setGeneric('harvest', function(object, ...) standardGeneric('harvest'))
setMethod('stock',   signature(object='data.frame'), object[,"stock"])
setMethod('harvest', signature(object='data.frame'), object[,"harvest"])
setMethod('stock',   signature(object='data.frame'), object[,"stock"])
setMethod('stock',   signature(object='data.frame'), function(object) object[,"stock"])
setMethod('harvest', signature(object='data.frame'), function(object) object[,"harvest"])
source('~/Desktop/kobe/R/kobe-data.frame.R', echo=TRUE)
setMethod('stock',   signature(object='data.frame',methods="missing"), function(object) object[,"stock"])
setGeneric('stock',   function(object, ...) standardGeneric('stock'))
setGeneric('harvest', function(object, ...) standardGeneric('harvest'))
setMethod('stock',   signature(object='data.frame'), function(object) object[,"stock"])
setMethod('harvest', signature(object='data.frame'), function(object) object[,"harvest"])
object=data.frame(stock=1,harvest=2)
setMethod('kobe',  signature(object="data.frame"),  function(object,what=c("sims","trks","pts","smry","wrms")[1],prob=c(0.75,0.5,.25),ptYrs=NULL,nwrms=10){
res=llply(object, function(x,what=what,prob=prob,ptYrs=ptYrs,nwrms=nwrms)
kobeFn(object,what=what,prob=prob,ptYrs=ptYrs,nwrms=nwrms),
what=what,prob=prob,ptYrs=ptYrs,nwrms=nwrms)
res=list(trks=ldply(res, function(x) x$trks),
pts =ldply(res, function(x) x$pts),
smry=ldply(res, function(x) x$smry),
wrms=ldply(res, function(x) x$wrms),
sims=ldply(res, function(x) x$sims))
if (length(what)==1)
return(res[[what]])
else
return(res[what]) })
setGeneric('kobe',       function(object,...)         standardGeneric('kobe'))
setMethod('kobe',  signature(object="data.frame"),  function(object,what=c("sims","trks","pts","smry","wrms")[1],prob=c(0.75,0.5,.25),ptYrs=NULL,nwrms=10){
res=llply(object, function(x,what=what,prob=prob,ptYrs=ptYrs,nwrms=nwrms)
kobeFn(object,what=what,prob=prob,ptYrs=ptYrs,nwrms=nwrms),
what=what,prob=prob,ptYrs=ptYrs,nwrms=nwrms)
res=list(trks=ldply(res, function(x) x$trks),
pts =ldply(res, function(x) x$pts),
smry=ldply(res, function(x) x$smry),
wrms=ldply(res, function(x) x$wrms),
sims=ldply(res, function(x) x$sims))
if (length(what)==1)
return(res[[what]])
else
return(res[what]) })
source('~/Desktop/kobe/R/kobe-data.frame.R', echo=TRUE)
source('~/Desktop/kobe/R/kobe-data.frame.R', echo=TRUE)
source('~/Desktop/kobe/R/kobe-generics.R', echo=TRUE)
source('~/Desktop/kobe/R/kobe-data.frame.R', echo=TRUE)
source('~/Desktop/kobe/R/kobe-read.R', echo=TRUE)
kobe
kobe()
biodyn
source('~/Desktop/kobe/R/kobe-data.frame.R', echo=TRUE)
kobeProb(data.frame(stock=1:10,harvest=1:10))
kobeProb
kobeProb(stock=1:10,harvest=1:10)
kobeProb(1:10,1:10)
tst=kobeProb(1:10,1:10)
geom_path(aes(x,y,group=level),colour="blue",
data=ddply(pts,.(Run), function(pts) kobeProb(pts$stock,pts$harvest,prob=c(0.7,.5,.25))))
data(prj)
attach(prj)
geom_path(aes(x,y,group=level),colour="blue",
data=ddply(pts,.(Run), function(pts) kobeProb(pts$stock,pts$harvest,prob=c(0.7,.5,.25))))
head(pts)
data(prj1)
attach(prj1)
head(pts)
geom_path(aes(x,y,group=level),colour="blue",
data=ddply(pts,.(X1), function(pts) kobeProb(pts$stock,pts$harvest,prob=c(0.7,.5,.25))))
geom_path(aes(x,y,group=level),colour="blue",
data=kobeProb(pts$stock,pts$harvest,prob=c(0.7,.5,.25))))
geom_path(aes(x,y,group=level),colour="blue",
data=kobeProb(pts$stock,pts$harvest,prob=c(0.7,.5,.25)))
data(prj)
geom_path(aes(x,y,group=level),colour="blue",
data=kobeProb(prj$pts$stock,prj$pts$harvest,prob=c(0.7,.5,.25)))}
data(prj)
geom_path(aes(x,y,group=level),colour="blue",
data=kobeProb(prj$pts$stock,prj$pts$harvest,prob=c(0.7,.5,.25)))
data(prj)
geom_path(aes(x,y,group=level),colour="blue",
data=kobeProb(prj$pts$stock,prj$pts$harvest,prob=c(0.7,.5,.25)))
a=ggplot(data.frame(x=1:10,y=1:10))+geom_point(aes(x,y))
multiplot(a,a)
library(aspic)
dirAspic="http://gbyp-sam.googlecode.com/svn/trunk/data/ASPIC"
runs=testRuns()
u=readU(paste(dirAspic,subset(runs,wg=="albs" & run=="run2")$dir,"aspic.inp",sep="/"))
u=subset(u,!is.na(index))
library(aspic)
dirAspic="http://gbyp-sam.googlecode.com/svn/trunk/data/ASPIC"
runs=testRuns()
runs
testRuns
dirAspic="http://gbyp-sam.googlecode.com/svn/trunk/data/ASPIC"
runs=testRuns()
u=readU(paste(dirAspic,subset(runs,stockId=="albs" & run=="run2")$dir,"aspic.inp",sep="/"))
u=subset(u,!is.na(index))
```{r fig.width=7, fig.height=6,echo=FALSE,warning=FALSE,message=FALSE}
ggplot(u) + geom_line( aes(year,  hat1    ), col="blue")  +
geom_line( aes(year,  hat2    ), col="black") +
geom_point(aes(year, log(index)))             +
facet_wrap(~name,scale="free_y",ncol=2)       +
theme_ms()
```
```{r}
library(aspic)
dirAspic="http://gbyp-sam.googlecode.com/svn/trunk/data/ASPIC"
runs=testRuns()
u=readU(paste(dirAspic,subset(runs,stockId=="albs" & run=="run2")$dir,"aspic.inp",sep="/"))
u=subset(u,!is.na(index))
```
library(aspic)
dirAspic="http://gbyp-sam.googlecode.com/svn/trunk/data/ASPIC"
runs=testRuns()
u=readU(paste(dirAspic,subset(runs,stockId=="albs" & run=="run2")$dir,"aspic.inp",sep="/"))
u=subset(u,!is.na(index))
head(u)
fit1=glm(log(index)~factor(year)+name,              data=u)
head(u)
fit1=glm(log(index)~factor(year)+name,              data=u)
tail(u)
library(aspic)
dirAspic="http://gbyp-sam.googlecode.com/svn/trunk/data/ASPIC"
runs=testRuns()
u=readU(paste(dirAspic,subset(runs,stockId=="albs" & run=="run2")$dir,"aspic.inp",sep="/"))
u=subset(u,!is.na(index))
head(u)
fit1=glm(log(index)~factor(year)+name,              data=u)
tail(u)
library(aspic)
runs=testRuns()
